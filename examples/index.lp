#!/usr/bin/env cgilua.cgi

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Welcome to CGILua!</title>
    <link rel="stylesheet" href="css/doc.css" type="text/css"/>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>

<body>

<div id="container">

<div id="product">
    </div>
	<div id="product_name"><big><strong>CGILua</strong></big></div>
	<div id="product_description">Welcome page</div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">

<% 
local files = {}
for file in lfs.dir("docs") do
    local attr = lfs.attributes ("docs/"..file)
    if file:match("html$") then
        table.insert(files, file)
    end
end
table.sort(files)
%>

<h1>CGILua</h1>

<ul>
<li><a href="docs/index.html">Documentation</a></li>
<ul>
    <%
    for _,file in ipairs(files) do
    %>
    <li><strong><a href="docs/<%= file %>"><%= file %></a></strong></li>
    <%
    end
    if not next(mods) then
    %>
    <li><strong>(None)</strong></li>
    <%
    end
    %>
</ul>
<li><a href="test.lp">Tests</a></li>
</ul>
</div> <!-- id="navigation" -->

<div id="content">

<h2>Congratulations!</h2>

<p>
If you are reading this page,
<strong><%= cgilua.servervariable("SERVER_SOFTWARE") %></strong>
has been successfully configured for CGILua on your system using
<strong><%= SAPI.Info._VERSION %></strong> and <strong><%= _VERSION %></strong>.
</p>

<p>
This is a page generated by CGILua that points to the installed modules documentation.
It serves both as a documentation index and as a simple example of a dynamic Lua Page.
</p>

<h2>What now?</h2>
<p>
From here you can also run some <a href="test.lp">tests</a>.
</p>

</div> <!-- id="content" -->

</div> <!-- id="main" -->

</div> <!-- id="container" -->
</body>
</html>
